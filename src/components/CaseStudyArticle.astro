---
//@ts-nocheck
import DynamicImage from "@components/helpers/DynamicImage.astro";
import Img1 from "@data/images/caseimg.webp?url";
import caseStudy from "@data/caseStudy.json";
const { caseName, category, date, image, buttonLabel } = caseStudy.caseDetails;
---

<article>
  <div class="case_inner">
    <div class="case_media">
    <img src={Img1} alt="">
    <!-- <DynamicImage imagePath={image} altText={caseName} /> -->
    <div class="case-details">
      <dl>
        <div>
          <dt> <strong>Case Name</strong></dt>
          <dd>{caseName}</dd>
        </div>
        <div>
          <dt><strong>Category</strong></dt>
          <dd class="category">{category}</dd>
        </div>
        <div>
          <dt><strong>Date</strong></dt>
          <dd class="date">{date}</dd>
        </div>
        <div><a href="#0" class="button">{buttonLabel}</a></div>
      </dl>
      </div>
    </div>
  {
    caseStudy.sections.map((section) => (
      <section>
        {caseStudy.sections[0] === section ? (
          <h2>{section.title}</h2>
        ) : (
          <h3>{section.title}</h3>
        )}

        {Array.isArray(section.content) ? (
          <>
            {section.content.map((item) => (
              <p>{item}</p>
            ))}
          </>
        ) : (
          <p>{section.content}</p>
        )}
        {section.highlights && (
          <ul>
            {section.highlights.map((highlight) => (
              <li>{highlight}</li>
            ))}
          </ul>
        )}
        {section.image && (
          <DynamicImage
            imagePath={section.image}
            altText={section.title}
            width={600}
            height={400}
          />
        )}
      </section>
    ))
  }
  </div>
</article>

<style>
  .case_inner{
  max-width: 1000px;
  margin: 0 auto;
  padding: 0 1rem;
}

.case_media{
  position: relative;
  max-width: 1000px;
  margin: 3rem auto 4.5rem; /* bottom space so the overlay doesn't collide with next content */
}

.case_media img{
  display: block;
  width: 100%;
  height: auto;
  border-radius: 46px;
}

/* the black box */
.case-details{
  position: absolute;
  left: 50%;
  bottom: -22px;                 /* how much it hangs below the image */
  transform: translateX(-50%);
  width: min(720px, 92%);
  z-index: 2;
}

.case-details dl{
  display: flex;
  gap: 1.25rem;
  align-items: center;
  justify-content: space-between;
  background: var(--color-primary-03);
  color: var(--color-secondary-02);
  padding: 2rem 1.5rem;
  border-radius: 18px;
}

.case-details dl div{font-weight: 300}
.case-details dl a{
  background: var(--color-primary-01);
  color: var(--color-primary-03);
  padding: .9rem 1.4rem;
  border-radius: 999px;
  font-weight: 600;
  text-decoration: none;
}

/* simple responsive: drop it below the image on small widths */
@media (max-width: 640px){
  .case-details{
    position: static;
    transform: none;
    width: 100%;
    margin-top: 1rem;
  }
}

</style>